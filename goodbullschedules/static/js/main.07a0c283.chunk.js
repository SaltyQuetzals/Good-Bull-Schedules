(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{38:function(e,t,n){e.exports=n(73)},72:function(e,t,n){},73:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(18),o=n.n(c),s=n(5),i=n(6),l=n(8),u=n(7),d=n(9),h=n(1),m=n(16),p=n.n(m),f=n(10),v=n.n(f),y=n(21),b=n.n(y),g=n(4),E=n.n(g),C=n(12),O=n.n(C),S=n(31),k=n(2);function j(e){var t=null;if(document.cookie&&""!==document.cookie)for(var n=document.cookie.split(";"),a=0;a<n.length;a++){var r=n[a].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}var D="ADD_SECTION",w="REMOVE_SECTION",N="ADD_COURSE",_="REMOVE_COURSE",x="ADD_SCHEDULE",T="REMOVE_SCHEDULE",I="SELECT_SCHEDULE",A="LOAD_SCHEDULES";var L=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={value:"",results:[]},n.handleChange=n.handleChange.bind(Object(h.a)(Object(h.a)(n))),n.dialogClosing=n.dialogClosing.bind(Object(h.a)(Object(h.a)(n))),n.search=Object(S.debounce)(n.search,300).bind(Object(h.a)(Object(h.a)(n))),n.resultSelected=n.resultSelected.bind(Object(h.a)(Object(h.a)(n))),n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"resultSelected",value:function(e){var t=this.state.results[e],n=t.dept,a=t.course_num,r={course_id:"".concat(n,"-").concat(a)},c={"Content-Type":"application/json","X-CSRFToken":j("csrftoken")},o=this;fetch("/api/schedules/".concat(this.props.currScheduleId,"/courses"),{method:"PATCH",mode:"same-origin",headers:c,body:JSON.stringify(r)}).then(function(e){return e.json()}).then(function(e){o.props.addCourse(e)}),this.dialogClosing()}},{key:"search",value:function(){var e=this;fetch("/api/data/search?q=".concat(this.state.value)).then(function(e){return e.json()}).then(function(t){e.setState({results:t})})}},{key:"handleChange",value:function(e){this.setState({value:e.currentTarget.value}),this.search()}},{key:"dialogClosing",value:function(){this.setState({results:[],value:""}),this.props.closeCourseDialog()}},{key:"render",value:function(){return r.a.createElement(v.a,{open:this.props.open,onClose:this.dialogClosing},r.a.createElement(f.DialogTitle,null,"Add Course"),r.a.createElement(f.DialogContent,{className:"course-dialog"},r.a.createElement(b.a,{helperText:r.a.createElement(y.HelperText,null,"Search"),trailingIcon:r.a.createElement(O.a,{role:"button",icon:"search"})},r.a.createElement(y.Input,{value:this.state.value,onChange:this.handleChange})),r.a.createElement(E.a,{className:"course-results-list",handleSelect:this.resultSelected},this.state.results.map(function(e,t){var n=e.name,a=e.dept,c=e.course_num;return r.a.createElement(g.ListItem,{key:t},r.a.createElement(g.ListItemText,{primaryText:"".concat(a,"-").concat(c,": ").concat(n)}))}))),r.a.createElement(f.DialogFooter,null,r.a.createElement(f.DialogButton,{action:"dismiss"},"Dismiss"),r.a.createElement(f.DialogButton,{action:"accept",isDefault:!0},"Accept")))}}]),t}(a.Component),M=Object(k.b)(function(e){if(e.currScheduleName){var t=e.schedules.get(e.currScheduleName);if(t)return{currScheduleId:t.id}}},function(e){return{addCourse:function(t){return e({type:N,payload:t})}}})(L),R=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){return r.a.createElement(v.a,{open:this.props.open},r.a.createElement(f.DialogTitle,null,"Add Schedule"),r.a.createElement(f.DialogContent,null),r.a.createElement(f.DialogFooter,null,r.a.createElement(f.DialogButton,{action:"dismiss"},"Dismiss"),r.a.createElement(f.DialogButton,{action:"accept",isDefault:!0},"Accept")))}}]),t}(a.Component),H=n(20),B=n(33),F=n.n(B),U=n(34),W=n.n(U),J=n(35),X={A:"#00BCD4",B:"#A5D6A7",C:"#FFEE58",D:"#E57373",F:"#90A4AE",Q:"#D1C4E9"},z=function(e){var t=e.historical_performance;if(null===t.A)return r.a.createElement("div",null);var n=[],a=0;for(var c in X){var o=t[c];a+=o||0}for(var s in X){var i=t[s];i&&n.push(r.a.createElement("div",{key:s,style:{backgroundColor:X[s],width:"".concat((i/a*100-.1).toFixed(2),"%"),display:"inline-block",border:"1px solid white",boxSizing:"border-box",height:20}}))}return r.a.createElement("div",{style:{width:"40%",marginLeft:"auto"}},n)},P=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).checkboxClickHandler=n.checkboxClickHandler.bind(Object(h.a)(Object(h.a)(n))),n.isChecked=n.isChecked.bind(Object(h.a)(Object(h.a)(n))),n.checkboxClickHandler=n.checkboxClickHandler.bind(Object(h.a)(Object(h.a)(n))),n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"isChecked",value:function(){return!!this.props.selectedCrns&&this.props.selectedCrns.has(this.props.section.crn)}},{key:"checkboxClickHandler",value:function(){var e="".concat(this.props.section.crn,"_").concat(this.props.section.term_code),t={"Content-Type":"application/json","X-CSRFToken":j("csrftoken")};if(this.isChecked())this.props.removeSection(this.props.section.crn),fetch("/api/schedules/".concat(this.props.currScheduleId,"/sections/").concat(e),{method:"DELETE",headers:t});else{this.props.addSection(this.props.section.crn);var n={section_id:e};fetch("/api/schedules/".concat(this.props.currScheduleId,"/sections"),{method:"POST",headers:t,body:JSON.stringify(n)})}}},{key:"render",value:function(){var e=this.props.section,t=e.section_num,n=e.instructor,a=e.historical_performance;return r.a.createElement(g.ListItem,null,r.a.createElement(J.Checkbox,{initRipple:function(){},checked:this.isChecked(),onChange:this.checkboxClickHandler}),r.a.createElement(g.ListItemText,{primaryText:t,secondaryText:n}),r.a.createElement(g.ListItemGraphic,{graphic:r.a.createElement(z,{historical_performance:a})}))}}]),t}(r.a.Component),V=Object(k.b)(function(e){var t=new Set,n=-1;if(e.currScheduleName){var a=e.schedules.get(e.currScheduleName);a&&(t=a.selectedCrns,n=a.id)}return{selectedCrns:t,currScheduleId:n}},function(e){return{addSection:function(t){return e(function(e){return{type:D,payload:e}}(t))},removeSection:function(t){return e(function(e){return{type:w,payload:e}}(t))}}})(P),G=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={checked:!1,indeterminate:!1},n.handleDeleteClick=n.handleDeleteClick.bind(Object(h.a)(Object(h.a)(n))),n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleDeleteClick",value:function(){this.props.removeCourse(this.props.dept,this.props.course_num);var e="".concat(this.props.dept,"-").concat(this.props.course_num),t={"Content-Type":"application/json","X-CSRFToken":j("csrftoken")};fetch("/api/schedules/".concat(this.props.currScheduleId,"/courses/").concat(e),{method:"DELETE",headers:t})}},{key:"render",value:function(){var e=r.a.createElement(g.ListItem,{className:"course-list-item"},r.a.createElement(g.ListItemText,{primaryText:"".concat(this.props.dept,"-").concat(this.props.course_num),secondaryText:this.props.name}),r.a.createElement(g.ListItemMeta,{meta:r.a.createElement(F.a,{onClick:this.handleDeleteClick},r.a.createElement(O.a,{icon:"delete"}))}));return r.a.createElement(W.a,{trigger:e,transitionTime:250},r.a.createElement(E.a,{twoLine:!0,className:"course-sections"},this.props.sections.map(function(e,t){var n=e.section;return r.a.createElement(V,{key:t,section:n})})))}}]),t}(r.a.Component),q=Object(k.b)(function(e){if(e.currScheduleName){var t=e.schedules.get(e.currScheduleName);if(t)return{currScheduleId:t.id}}},function(e){return{removeCourse:function(t,n){return e(function(e,t){return{type:_,payload:{dept:e,course_num:t}}}(t,n))}}})(G),Q=function(e){function t(){return Object(s.a)(this,t),Object(l.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=[];for(var t in this.props.courses){var n=this.props.courses[t],a=n.dept,c=n.name,o=n.course_num,s=n.sections.map(function(e){return{section:e}});e.push(r.a.createElement(q,{key:"".concat(a,"-").concat(o),name:c,dept:a,course_num:o,sections:s}))}return r.a.createElement(E.a,{twoLine:!0,avatarList:!0},e)}}]),t}(r.a.Component),Y=Object(k.b)(function(e){var t={};if(e.currScheduleName){var n=e.schedules.get(e.currScheduleName);n&&(t=Object(H.a)({},n.courses))}return{courses:t}})(Q),$=n(36),K=n.n($),Z=n(37),ee=n.n(Z),te=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).handleSelectionChange=n.handleSelectionChange.bind(Object(h.a)(Object(h.a)(n))),n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.currScheduleName||this.props.scheduleNames.length>0&&this.props.selectSchedule(this.props.scheduleNames[0])}},{key:"handleSelectionChange",value:function(e){e.target?this.props.selectSchedule(e.target.value):console.log("Event target is undefined?")}},{key:"render",value:function(){return 0===this.props.scheduleNames.length?null:r.a.createElement(ee.a,{className:"schedule-select",onChange:this.handleSelectionChange,options:this.props.scheduleNames})}}]),t}(r.a.Component),ne=Object(k.b)(function(e){return{currScheduleName:e.currScheduleName}},function(e){return{selectSchedule:function(t){return e(function(e){return{type:I,payload:e}}(t))}}})(te),ae=n(15),re=n(14),ce=function(e){return r.a.createElement("div",{style:{position:"absolute",top:100*e.start+"%",height:100*e.duration+"%",width:"100%",borderRadius:3,background:"red",display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement(re.Body1,null,e.displayText))},oe=function(e){var t=e%1,n=e-t;if(t*=60,t=Math.round(t),n>24){Math.floor(n/24);n%=24}var a=new Date;a.setHours(n),a.setMinutes(t),a.setSeconds(0);var r=a.toTimeString().split(" ")[0].split(":"),c=Object(ae.a)(r,3),o=c[0],s=c[1];c[2];return"".concat(o,":").concat(s)},se=Object(k.b)(function(e){var t=[];if(e.currScheduleName){var n=e.schedules.get(e.currScheduleName);n&&n.selectedCrns.forEach(function(e){for(var a in n.courses){var r=!0,c=!1,o=void 0;try{for(var s,i=n.courses[a].sections[Symbol.iterator]();!(r=(s=i.next()).done);r=!0){var l=s.value;if(l.crn===e&&t.push(l),t.length===n.selectedCrns.size)return{sections:t}}}catch(u){c=!0,o=u}finally{try{r||null==i.return||i.return()}finally{if(c)throw o}}}})}return{sections:t}})(function(e){var t={M:[],T:[],W:[],R:[],F:[]},n=!0,a=!1,c=void 0;try{for(var o,s=e.sections[Symbol.iterator]();!(n=(o=s.next()).done);n=!0){var i=o.value,l=!0,u=!1,d=void 0;try{for(var h,m=i.meetings[Symbol.iterator]();!(l=(h=m.next()).done);l=!0){var p=h.value;if(p.start_time&&p.end_time&&p.meeting_days){var f=(p.start_time-420)/900,v=(p.end_time-420)/900-f,y="".concat(i.dept,"-").concat(i.course_num,"-").concat(i.section_num),b=!0,g=!1,E=void 0;try{for(var C,O=p.meeting_days[Symbol.iterator]();!(b=(C=O.next()).done);b=!0)t[C.value].push(r.a.createElement(ce,{key:Math.random()*Number.MAX_SAFE_INTEGER,start:f,duration:v,displayText:y}))}catch(I){g=!0,E=I}finally{try{b||null==O.return||O.return()}finally{if(g)throw E}}}}}catch(I){u=!0,d=I}finally{try{l||null==m.return||m.return()}finally{if(u)throw d}}}}catch(I){a=!0,c=I}finally{try{n||null==s.return||s.return()}finally{if(a)throw c}}for(var S=[],k=0,j=[["Monday","M"],["Tuesday","T"],["Wednesday","W"],["Thursday","R"],["Friday","F"]];k<j.length;k++){var D=j[k],w=Object(ae.a)(D,2),N=w[0],_=w[1];S.push(r.a.createElement("div",{className:"day",key:_},r.a.createElement("strong",{className:"week-heading"},r.a.createElement(re.Body1,null,N)),t[_]))}for(var x=[],T=0;T<=15;++T)x.push(r.a.createElement("tr",{className:"week-row",key:T},r.a.createElement("td",{style:{width:"20px",height:T?"auto":"36px",color:"grey",textAlign:"left",padding:"3px 10px 0 0",paddingLeft:10,borderBottom:"1px solid grey",verticalAlign:"top"}},r.a.createElement(re.Body1,null,T?oe(T+7-1):"")),r.a.createElement("td",{style:{borderBottom:"1px solid grey",boxSizing:"border-box"}})));return r.a.createElement("div",null,r.a.createElement("div",{className:"week-wrap"},r.a.createElement("div",{className:"week-container"},r.a.createElement("table",{className:"week-grid"},r.a.createElement("tbody",null,x)),r.a.createElement("div",{className:"days"},S))))}),ie=function(e){function t(e){var n;return Object(s.a)(this,t),(n=Object(l.a)(this,Object(u.a)(t).call(this,e))).state={addCourseDialogIsOpen:!1,addScheduleDialogIsOpen:!1},n.handleClick=n.handleClick.bind(Object(h.a)(Object(h.a)(n))),n.closeCourseDialog=n.closeCourseDialog.bind(Object(h.a)(Object(h.a)(n))),n}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/schedules/").then(function(e){return e.json()}).then(function(t){e.props.loadSchedules(t)}).catch(function(e){return console.log(e)})}},{key:"handleClick",value:function(){this.props.anySchedulesCreated?this.setState({addCourseDialogIsOpen:!0}):this.setState({addScheduleDialogIsOpen:!0})}},{key:"closeCourseDialog",value:function(){this.setState({addCourseDialogIsOpen:!1})}},{key:"render",value:function(){var e=this.props.schedules;return r.a.createElement("div",{className:"drawer-container"},r.a.createElement(p.a,{className:"drawer"},r.a.createElement(m.DrawerHeader,null,r.a.createElement(ne,{scheduleNames:Array.from(e.keys())})),r.a.createElement(m.DrawerContent,{className:"drawer-content"},r.a.createElement(Y,null))),r.a.createElement(m.DrawerAppContent,{className:"drawer-app-content"},r.a.createElement("div",{className:"week"},r.a.createElement(se,null)),r.a.createElement(K.a,{className:"fab",icon:r.a.createElement(O.a,{icon:"add"}),onClick:this.handleClick})),r.a.createElement(R,{open:this.state.addScheduleDialogIsOpen}),r.a.createElement(M,{open:this.state.addCourseDialogIsOpen,closeCourseDialog:this.closeCourseDialog}))}}]),t}(a.Component),le=Object(k.b)(function(e){return{anySchedulesCreated:0!==Array.from(e.schedules.keys()).length,schedules:e.schedules,currScheduleName:e.currScheduleName}},function(e){return{loadSchedules:function(t){return e(function(e){return{type:A,payload:e}}(t))}}})(ie);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ue=n(19),de=(new Map,{schedules:new Map,currScheduleName:void 0}),he=function(e){var t=e.split(":").map(function(e){return Number.parseInt(e)}),n=Object(ae.a)(t,3);return 60*n[0]+n[1]+n[2]/60};n(60),n(61),n(62),n(63),n(64),n(65),n(66),n(67),n(68),n(69),n(70),n(71),n(72);var me=Object(ue.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;he("08:00:00");var n=Object(H.a)({},e),a=n.currScheduleName;if(t.type===I&&(n.currScheduleName=t.payload),a){var r=n.schedules.get(a);if(r)switch(t.type){case D:r.selectedCrns.add(t.payload);break;case w:r.selectedCrns.delete(t.payload);break;case N:var c=t.payload,o=!0,s=!1,i=void 0;try{for(var l,u=c.sections[Symbol.iterator]();!(o=(l=u.next()).done);o=!0){var d=l.value,h=!0,m=!1,p=void 0;try{for(var f,v=d.meetings[Symbol.iterator]();!(h=(f=v.next()).done);h=!0){var y=f.value;y.start_time&&(y.start_time=he(y.start_time)),y.end_time&&(y.end_time=he(y.end_time))}}catch(V){m=!0,p=V}finally{try{h||null==v.return||v.return()}finally{if(m)throw p}}}}catch(V){s=!0,i=V}finally{try{o||null==u.return||u.return()}finally{if(s)throw i}}console.log("PAYLOAD =",t.payload),console.log("COURSE =",c),r.courses["".concat(t.payload.dept,"-").concat(t.payload.course_num)]=c;break;case _:var b=t.payload,g=b.dept,E=b.course_num;delete r.courses["".concat(g,"-").concat(E)],n.schedules.set(a,r);break;case T:n.schedules.delete(t.payload)}else if(t.type!==x)throw Error("The schedule attempting to be accessed does not exist.")}else if(t.type===A)for(var C in t.payload){var O=t.payload[C];for(var S in O.courses){var k=O.courses[S],j=!0,L=!1,M=void 0;try{for(var R,B=k.sections[Symbol.iterator]();!(j=(R=B.next()).done);j=!0){var F=R.value,U=!0,W=!1,J=void 0;try{for(var X,z=F.meetings[Symbol.iterator]();!(U=(X=z.next()).done);U=!0){var P=X.value;P.start_time&&(P.start_time=he(P.start_time)),P.end_time&&(P.end_time=he(P.end_time))}}catch(V){W=!0,J=V}finally{try{U||null==z.return||z.return()}finally{if(W)throw J}}}}catch(V){L=!0,M=V}finally{try{j||null==B.return||B.return()}finally{if(L)throw M}}}O.selectedCrns=new Set(O.sections.map(function(e){return Number.parseInt(e.split("_")[0])})),delete O.sections,n.schedules.set(C,O)}return console.log(n),n});o.a.render(r.a.createElement(k.a,{store:me},r.a.createElement(le,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[38,1,2]]]);
//# sourceMappingURL=main.07a0c283.chunk.js.map