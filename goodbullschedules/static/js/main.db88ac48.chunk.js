(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{40:function(e,t,a){e.exports=a(85)},84:function(e,t,a){},85:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),c=a(18),o=a.n(c),l=a(4),i=a(5),s=a(7),u=a(6),d=a(8),h=a(1),m=a(16),p=a.n(m),f=a(25),v=a.n(f),b=a(34),y=a.n(b),g=a(19),E=a.n(g),C=a(12),S=a.n(C),O=a(9),k=a.n(O),j=a(10),_=a.n(j),N=a(35),w=a(3);function x(e){var t=null;if(document.cookie&&""!==document.cookie)for(var a=document.cookie.split(";"),n=0;n<a.length;n++){var r=a[n].trim();if(r.substring(0,e.length+1)===e+"="){t=decodeURIComponent(r.substring(e.length+1));break}}return t}var T="ADD_SECTION",I="REMOVE_SECTION",D="ADD_COURSE",A="REMOVE_COURSE",F="ADD_SCHEDULE",L="REMOVE_SCHEDULE",H="SELECT_SCHEDULE",M="LOAD_SCHEDULES";function R(e){return{type:H,payload:e}}var B=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={value:"",results:[]},a.handleChange=a.handleChange.bind(Object(h.a)(Object(h.a)(a))),a.dialogClosing=a.dialogClosing.bind(Object(h.a)(Object(h.a)(a))),a.search=Object(N.debounce)(a.search,300).bind(Object(h.a)(Object(h.a)(a))),a.resultSelected=a.resultSelected.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"resultSelected",value:function(e){var t=this.state.results[e],a=t.dept,n=t.course_num,r={course_id:"".concat(a,"-").concat(n)},c={"Content-Type":"application/json","X-CSRFToken":x("csrftoken")},o=this;fetch("/api/schedules/".concat(this.props.currScheduleId,"/courses"),{method:"PATCH",mode:"same-origin",headers:c,body:JSON.stringify(r)}).then(function(e){return e.json()}).then(function(e){return o.props.addCourse(e)}),this.dialogClosing()}},{key:"search",value:function(){var e=this;fetch("/api/data/search?q=".concat(this.state.value)).then(function(e){return e.json()}).then(function(t){return e.setState({results:t})})}},{key:"handleChange",value:function(e){this.setState({value:e.currentTarget.value}),this.search()}},{key:"dialogClosing",value:function(){this.setState({results:[],value:""}),this.props.closeDialog()}},{key:"render",value:function(){return r.a.createElement("div",null,r.a.createElement(S.a,{helperText:r.a.createElement(C.HelperText,null,"Search"),trailingIcon:r.a.createElement(_.a,{role:"button",icon:"search"})},r.a.createElement(C.Input,{value:this.state.value,onChange:this.handleChange})),r.a.createElement(k.a,{className:"course-results-list",handleSelect:this.resultSelected},this.state.results.map(function(e,t){var a=e.name,n=e.dept,c=e.course_num;return r.a.createElement(O.ListItem,{key:t},r.a.createElement(O.ListItemText,{primaryText:"".concat(n,"-").concat(c,": ").concat(a)}))})))}}]),t}(r.a.Component),U=Object(w.b)(function(e){if(e.currScheduleName){var t=e.schedules.get(e.currScheduleName);if(t)return{currScheduleId:t.id}}},function(e){return{addCourse:function(t){return e({type:D,payload:t})}}})(B),V=a(21),J=a.n(V),W=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={value:"",terms:[],activeTerm:null},a.handleValueChange=a.handleValueChange.bind(Object(h.a)(Object(h.a)(a))),a.submitScheduleName=a.submitScheduleName.bind(Object(h.a)(Object(h.a)(a))),a.handleTermChange=a.handleTermChange.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/data/terms").then(function(e){return e.json()}).then(function(t){var a=null;t.length>0&&(a=t[0]),console.log(t),e.setState({terms:t.sort(function(e,t){return e<t}),activeTerm:a})})}},{key:"handleValueChange",value:function(e){this.setState({value:e.currentTarget.value})}},{key:"submitScheduleName",value:function(){if(console.log(this.state.value),console.log(this.state.activeTerm),void 0!==this.state.activeTerm&&null!==this.state.activeTerm){var e={name:this.state.value,term_code:this.state.activeTerm};console.log(e);var t=x("csrftoken"),a=this;fetch("/api/schedules/",{method:"POST",headers:{"Content-Type":"application/json","X-CSRFToken":t},body:JSON.stringify(e)}).then(function(e){return e.json()}).then(function(e){a.props.addSchedule(e)}),this.setState({value:""}),this.props.closeDialog()}}},{key:"handleTermChange",value:function(e){this.setState({activeTerm:e.target.value})}},{key:"render",value:function(){var e=this.state.terms.map(function(e,t){return r.a.createElement("option",{key:t,value:e},function(e){var t=e.toString(),a=t.substr(0,4),n=t[4];"1"===n?n="Spring":"2"===n?n="Summer":"3"===n?n="Fall":"4"===n&&(n="Full Year Professional");var r=t[5];return"1"===r?r="College Station":"2"===r?r="Galveston":"3"===r?r="Qatar":"5"===r&&(r="Half Year Term"),n+" "+a+" - "+r}(e))});return r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(S.a,{label:"Schedule Name",style:{width:"100%"},trailingIcon:r.a.createElement(_.a,{role:"button",icon:"arrow_forward"}),onTrailingIconSelect:this.submitScheduleName},r.a.createElement(C.Input,{value:this.state.value,onChange:this.handleValueChange})),r.a.createElement("div",{style:{width:"100%"}},r.a.createElement(J.a,{onChange:this.handleTermChange},e)))}}]),t}(r.a.Component),X=Object(w.b)(null,function(e){return{addSchedule:function(t){return e({type:F,payload:{name:(a=t).name,id:a.id,term_code:a.term_code,selectedCrns:new Set,courses:{}}});var a},selectSchedule:function(t){return e(R(t))}}})(W),P=function(e){function t(){var e,a;Object(l.a)(this,t);for(var n=arguments.length,r=new Array(n),c=0;c<n;c++)r[c]=arguments[c];return(a=Object(s.a)(this,(e=Object(u.a)(t)).call.apply(e,[this].concat(r)))).state={activeIndex:0},a.handleActiveIndexUpdate=function(e){a.setState({activeIndex:e})},a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=[r.a.createElement(U,{closeDialog:this.props.closeDialog}),r.a.createElement(X,{closeDialog:this.props.closeDialog})];return r.a.createElement(v.a,{open:this.props.open},r.a.createElement(f.DialogContent,null,r.a.createElement("div",null,r.a.createElement(y.a,{activeIndex:this.state.activeIndex,handleActiveIndexUpdate:this.handleActiveIndexUpdate},r.a.createElement(E.a,null,r.a.createElement("span",{className:"mdc-tab__text-label"},"Course")),r.a.createElement(E.a,null,r.a.createElement("span",{className:"mdc-tab__text-label"},"Schedule"))),e[this.state.activeIndex])))}}]),t}(r.a.Component),z=a(22),G=a(37),Q=a.n(G),Y=a(38),q=a.n(Y),$=a(39),K={A:"#00BCD4",B:"#A5D6A7",C:"#FFEE58",D:"#E57373",F:"#90A4AE",Q:"#D1C4E9"},Z=function(e){var t=e.historical_performance;if(null===t.A)return r.a.createElement("div",null);var a=[],n=0;for(var c in K){var o=t[c];n+=o||0}for(var l in K){var i=t[l];i&&a.push(r.a.createElement("div",{key:l,style:{backgroundColor:K[l],width:"".concat((i/n*100-.1).toFixed(2),"%"),display:"inline-block",border:"1px solid white",boxSizing:"border-box",height:20}}))}return r.a.createElement("div",{style:{width:"40%",marginLeft:"auto"}},a)},ee=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).checkboxClickHandler=a.checkboxClickHandler.bind(Object(h.a)(Object(h.a)(a))),a.isChecked=a.isChecked.bind(Object(h.a)(Object(h.a)(a))),a.checkboxClickHandler=a.checkboxClickHandler.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"isChecked",value:function(){return!!this.props.selectedCrns&&this.props.selectedCrns.has(this.props.section.crn)}},{key:"checkboxClickHandler",value:function(){var e="".concat(this.props.section.crn,"_").concat(this.props.section.term_code),t={"Content-Type":"application/json","X-CSRFToken":x("csrftoken")};if(this.isChecked())this.props.removeSection(this.props.section.crn),fetch("/api/schedules/".concat(this.props.currScheduleId,"/sections/").concat(e),{method:"DELETE",headers:t});else{this.props.addSection(this.props.section.crn);var a={section_id:e};fetch("/api/schedules/".concat(this.props.currScheduleId,"/sections"),{method:"PATCH",headers:t,body:JSON.stringify(a)})}}},{key:"render",value:function(){var e=this.props.section,t=e.section_num,a=e.instructor,n=e.historical_performance;return r.a.createElement(O.ListItem,null,r.a.createElement($.Checkbox,{initRipple:function(){},checked:this.isChecked(),onChange:this.checkboxClickHandler}),r.a.createElement(O.ListItemText,{primaryText:t,secondaryText:a||"TBA"}),r.a.createElement(O.ListItemGraphic,{graphic:r.a.createElement(Z,{historical_performance:n})}))}}]),t}(r.a.Component),te=Object(w.b)(function(e){var t=new Set,a=-1;if(e.currScheduleName){var n=e.schedules.get(e.currScheduleName);n&&(t=n.selectedCrns,a=n.id)}return{selectedCrns:t,currScheduleId:a}},function(e){return{addSection:function(t){return e(function(e){return{type:T,payload:e}}(t))},removeSection:function(t){return e(function(e){return{type:I,payload:e}}(t))}}})(ee),ae=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={checked:!1,indeterminate:!1},a.handleDeleteClick=a.handleDeleteClick.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"handleDeleteClick",value:function(){this.props.removeCourse(this.props.dept,this.props.course_num);var e="".concat(this.props.dept,"-").concat(this.props.course_num),t={"Content-Type":"application/json","X-CSRFToken":x("csrftoken")};fetch("/api/schedules/".concat(this.props.currScheduleId,"/courses/").concat(e),{method:"DELETE",headers:t})}},{key:"render",value:function(){var e=r.a.createElement(O.ListItem,{className:"course-list-item"},r.a.createElement(O.ListItemText,{primaryText:"".concat(this.props.dept,"-").concat(this.props.course_num),secondaryText:this.props.name}),r.a.createElement(O.ListItemMeta,{meta:r.a.createElement(Q.a,{onClick:this.handleDeleteClick},r.a.createElement(_.a,{icon:"delete"}))}));return r.a.createElement(q.a,{trigger:e,transitionTime:250},r.a.createElement(k.a,{twoLine:!0,className:"course-sections"},this.props.sections.map(function(e,t){var a=e.section;return r.a.createElement(te,{key:t,section:a})})))}}]),t}(r.a.Component),ne=Object(w.b)(function(e){if(e.currScheduleName){var t=e.schedules.get(e.currScheduleName);if(t)return{currScheduleId:t.id}}},function(e){return{removeCourse:function(t,a){return e(function(e,t){return{type:A,payload:{dept:e,course_num:t}}}(t,a))}}})(ae),re=function(e){function t(){return Object(l.a)(this,t),Object(s.a)(this,Object(u.a)(t).apply(this,arguments))}return Object(d.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=[];for(var t in this.props.courses){var a=this.props.courses[t],n=a.dept,c=a.name,o=a.course_num,l=a.sections.map(function(e){return{section:e}});e.push(r.a.createElement(ne,{key:"".concat(n,"-").concat(o),name:c,dept:n,course_num:o,sections:l}))}return r.a.createElement(k.a,{twoLine:!0,avatarList:!0},e)}}]),t}(r.a.Component),ce=Object(w.b)(function(e){var t={};if(e.currScheduleName){var a=e.schedules.get(e.currScheduleName);a&&(t=Object(z.a)({},a.courses))}return{courses:t}})(re),oe=a(28),le=a.n(oe),ie=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).handleSelectionChange=a.handleSelectionChange.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){this.props.currScheduleName||this.props.scheduleNames.length>0&&this.props.selectSchedule(this.props.scheduleNames[0])}},{key:"handleSelectionChange",value:function(e){e.target?this.props.selectSchedule(e.target.value):console.log("Event target is undefined?")}},{key:"render",value:function(){return 0===this.props.scheduleNames.length?null:r.a.createElement(J.a,{className:"schedule-select",value:this.props.currScheduleName,onChange:this.handleSelectionChange,options:this.props.scheduleNames})}}]),t}(r.a.Component),se=Object(w.b)(function(e){return{currScheduleName:e.currScheduleName}},function(e){return{selectSchedule:function(t){return e(R(t))}}})(ie),ue=a(15),de=a(14),he=function(e){return r.a.createElement("div",{style:{position:"absolute",top:100*e.start+"%",height:100*e.duration+"%",width:"100%",borderRadius:3,background:e.color,color:"#FFFFFF",display:"flex",alignItems:"center",justifyContent:"center"}},r.a.createElement(de.Body1,null,e.displayText))},me=["#F25270","#3C95AB","#485CF2","#F29207","#FF5930","#FFEB3B","#9A5BAC"],pe=function(e){var t=e%1,a=e-t;if(t*=60,t=Math.round(t),a>24){Math.floor(a/24);a%=24}var n=new Date;n.setHours(a),n.setMinutes(t),n.setSeconds(0);var r=n.toTimeString().split(" ")[0].split(":"),c=Object(ue.a)(r,3),o=c[0],l=c[1];c[2];return"".concat(o,":").concat(l)},fe=Object(w.b)(function(e){var t=[];if(e.currScheduleName){var a=e.schedules.get(e.currScheduleName);a&&a.selectedCrns.forEach(function(e){for(var n in a.courses){var r=!0,c=!1,o=void 0;try{for(var l,i=a.courses[n].sections[Symbol.iterator]();!(r=(l=i.next()).done);r=!0){var s=l.value;if(s.crn===e&&t.push(s),t.length===a.selectedCrns.size)return{sections:t}}}catch(u){c=!0,o=u}finally{try{r||null==i.return||i.return()}finally{if(c)throw o}}}})}return{sections:t}})(function(e){var t={M:[],T:[],W:[],R:[],F:[]},a=!0,n=!1,c=void 0;try{for(var o,l=e.sections[Symbol.iterator]();!(a=(o=l.next()).done);a=!0){var i=o.value,s=Number.parseInt(i.course_num+i.section_num)%me.length,u=me[s],d=!0,h=!1,m=void 0;try{for(var p,f=i.meetings[Symbol.iterator]();!(d=(p=f.next()).done);d=!0){var v=p.value;if(v.start_time&&v.end_time&&v.meeting_days){var b=(v.start_time-420)/900,y=(v.end_time-420)/900-b,g="".concat(i.dept,"-").concat(i.course_num,"-").concat(i.section_num),E=!0,C=!1,S=void 0;try{for(var O,k=v.meeting_days[Symbol.iterator]();!(E=(O=k.next()).done);E=!0)t[O.value].push(r.a.createElement(he,{key:Math.random()*Number.MAX_SAFE_INTEGER,color:u,start:b,duration:y,displayText:g}))}catch(F){C=!0,S=F}finally{try{E||null==k.return||k.return()}finally{if(C)throw S}}}}}catch(F){h=!0,m=F}finally{try{d||null==f.return||f.return()}finally{if(h)throw m}}}}catch(F){n=!0,c=F}finally{try{a||null==l.return||l.return()}finally{if(n)throw c}}for(var j=[],_=0,N=[["Monday","M"],["Tuesday","T"],["Wednesday","W"],["Thursday","R"],["Friday","F"]];_<N.length;_++){var w=N[_],x=Object(ue.a)(w,2),T=x[0],I=x[1];j.push(r.a.createElement("div",{className:"day",key:I},r.a.createElement("strong",{className:"week-heading"},r.a.createElement(de.Body1,null,T)),t[I]))}for(var D=[],A=0;A<=15;++A)D.push(r.a.createElement("tr",{className:"week-row",key:A},r.a.createElement("td",{style:{width:"20px",height:A?"auto":"24px",color:"grey",textAlign:"left",padding:"3px 10px 0 0",paddingLeft:10,borderBottom:"1px solid grey",verticalAlign:"top"}},r.a.createElement(de.Body1,null,A?pe(A+7-1):"")),r.a.createElement("td",{style:{borderBottom:"1px solid grey",boxSizing:"border-box"}})));return r.a.createElement("div",null,r.a.createElement("div",{className:"week-wrap"},r.a.createElement("div",{className:"week-container"},r.a.createElement("table",{className:"week-grid"},r.a.createElement("tbody",null,D)),r.a.createElement("div",{className:"days"},j))))}),ve=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(s.a)(this,Object(u.a)(t).call(this,e))).state={dialogOpen:!1},a.handleClick=a.handleClick.bind(Object(h.a)(Object(h.a)(a))),a}return Object(d.a)(t,e),Object(i.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("/api/schedules/").then(function(e){return e.json()}).then(function(t){e.props.loadSchedules(t)}).catch(function(e){return console.log(e)})}},{key:"handleClick",value:function(){this.setState({dialogOpen:!this.state.dialogOpen})}},{key:"handleLogout",value:function(){window.location.href="/auth/logout"}},{key:"render",value:function(){var e=this.props.schedules,t=null;return this.props.anySchedulesCreated&&(t=r.a.createElement(se,{scheduleNames:Array.from(e.keys())})),r.a.createElement("div",{className:"drawer-container"},r.a.createElement(p.a,{className:"drawer"},r.a.createElement(m.DrawerHeader,null,t),r.a.createElement(m.DrawerContent,{className:"drawer-content"},r.a.createElement(ce,null))),r.a.createElement(m.DrawerAppContent,{className:"drawer-app-content"},r.a.createElement("div",{className:"week"},r.a.createElement(fe,null)),r.a.createElement(le.a,{className:"fab",icon:r.a.createElement(_.a,{icon:"add"}),onClick:this.handleClick}),r.a.createElement(le.a,{mini:!0,className:"logout",icon:r.a.createElement(_.a,{icon:"exit_to_app"}),onClick:this.handleLogout})),r.a.createElement(P,{open:this.state.dialogOpen,closeDialog:this.handleClick}))}}]),t}(n.Component),be=Object(w.b)(function(e){return{anySchedulesCreated:0!==Array.from(e.schedules.keys()).length,schedules:e.schedules,currScheduleName:e.currScheduleName}},function(e){return{loadSchedules:function(t){return e(function(e){return{type:M,payload:e}}(t))}}})(ve);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var ye=a(20),ge={schedules:new Map,currScheduleName:void 0},Ee=function(e){var t=e.split(":").map(function(e){return Number.parseInt(e)}),a=Object(ue.a)(t,3);return 60*a[0]+a[1]+a[2]/60};a(68),a(69),a(70),a(71),a(72),a(73),a(74),a(75),a(76),a(77),a(78),a(79),a(80),a(81),a(82),a(83),a(84);var Ce=Object(ye.b)(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:ge,t=arguments.length>1?arguments[1]:void 0,a=Object(z.a)({},e),n=a.currScheduleName;if(t.type===H&&(a.currScheduleName=t.payload),t.type===F&&(a.schedules.set(t.payload.name,t.payload),a.currScheduleName=t.payload.name),n){var r=a.schedules.get(n);if(r)switch(t.type){case T:r.selectedCrns.add(t.payload);break;case I:r.selectedCrns.delete(t.payload);break;case D:var c=t.payload,o=!0,l=!1,i=void 0;try{for(var s,u=c.sections[Symbol.iterator]();!(o=(s=u.next()).done);o=!0){var d=s.value,h=!0,m=!1,p=void 0;try{for(var f,v=d.meetings[Symbol.iterator]();!(h=(f=v.next()).done);h=!0){var b=f.value;b.start_time&&(b.start_time=Ee(b.start_time)),b.end_time&&(b.end_time=Ee(b.end_time))}}catch(K){m=!0,p=K}finally{try{h||null==v.return||v.return()}finally{if(m)throw p}}}}catch(K){l=!0,i=K}finally{try{o||null==u.return||u.return()}finally{if(l)throw i}}r.courses["".concat(t.payload.dept,"-").concat(t.payload.course_num)]=c;break;case A:var y=t.payload,g=y.dept,E=y.course_num,C=!0,S=!1,O=void 0;try{for(var k,j=r.courses["".concat(g,"-").concat(E)].sections[Symbol.iterator]();!(C=(k=j.next()).done);C=!0){var _=k.value;r.selectedCrns.delete(_.crn)}}catch(K){S=!0,O=K}finally{try{C||null==j.return||j.return()}finally{if(S)throw O}}delete r.courses["".concat(g,"-").concat(E)],a.schedules.set(n,r);break;case L:a.schedules.delete(t.payload)}}else if(t.type===M)for(var N in t.payload){var w=t.payload[N];for(var x in w.courses){var R=w.courses[x],B=!0,U=!1,V=void 0;try{for(var J,W=R.sections[Symbol.iterator]();!(B=(J=W.next()).done);B=!0){var X=J.value,P=!0,G=!1,Q=void 0;try{for(var Y,q=X.meetings[Symbol.iterator]();!(P=(Y=q.next()).done);P=!0){var $=Y.value;$.start_time&&($.start_time=Ee($.start_time)),$.end_time&&($.end_time=Ee($.end_time))}}catch(K){G=!0,Q=K}finally{try{P||null==q.return||q.return()}finally{if(G)throw Q}}}}catch(K){U=!0,V=K}finally{try{B||null==W.return||W.return()}finally{if(U)throw V}}}w.selectedCrns=new Set(w.sections.map(function(e){return Number.parseInt(e.split("_")[0])})),delete w.sections,a.schedules.set(N,w)}return console.log(a),a});o.a.render(r.a.createElement(w.a,{store:Ce},r.a.createElement(be,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then(function(e){e.unregister()})}},[[40,1,2]]]);
//# sourceMappingURL=main.db88ac48.chunk.js.map